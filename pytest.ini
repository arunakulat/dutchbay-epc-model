[pytest]
# Curated v14 + analytics suite.
# We test only the new v14 path and supporting analytics/finance modules.
# Legacy v13 tests live under tests_legacy_v13/ and are not collected.

testpaths =
    tests/api/test_epc_helper_v14.py
    tests/api/test_export_helpers_v14.py
    tests/api/test_irr_core.py
    tests/api/test_metrics_module.py
    tests/api/test_scenario_manager_smoke.py
    tests/api/test_tax_calculator_v14.py
    tests/api/test_kpi_normalizer.py
    tests/api/test_fx_resolver_unit.py
    tests/test_cli_v14_smoke.py
    tests/test_export_smoke.py
    tests/test_fx_config_strictness.py
    tests/test_metrics_integration.py
    tests/test_scenario_analytics_smoke.py
    tests/test_v14_pipeline_smoke.py

addopts =
    --cov=analytics
    --cov=dutchbay_v14chat
    --cov=finance
    --cov-report=term-missing
    --cov-fail-under=65